<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>提取 Bilibili 视频链接</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 50px;
      }

      textarea {
        width: 100%;
        height: 100px;
        margin-bottom: 20px;
      }

      button {
        padding: 10px 20px;
        font-size: 16px;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <h1>提取 Bilibili 视频链接</h1>

    <label for="bilibiliIframe">粘贴 Bilibili 视频 iframe 代码：</label>
    <textarea
      id="bilibiliIframe"
      placeholder='<iframe src="//player.bilibili.com/player.html?aid=236167169&bvid=BV1ov411c7US&cid=1340671041&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe>'
    ></textarea>

    <button onclick="extractBilibiliLink()">提取链接</button>

    <label for="extractedLink">提取的链接：</label>
    <textarea id="extractedLink" readonly></textarea>

    <script>
      function extractBilibiliLink() {
        // 获取输入框中的文本
        var iframeCode = document.getElementById('bilibiliIframe').value

        // 正确的正则表达式匹配链接
        var regex = /<iframe[^>]*src=["'](.*?)["'][^>]*>/
        var match = iframeCode.match(regex)

        // 如果匹配成功，显示提取的链接
        if (match && match[1]) {
          var extractedLink = match[1]
          document.getElementById('extractedLink').value = extractedLink
        } else {
          alert('未能提取链接，请检查输入的 iframe 代码是否正确。')
        }
      }
    </script>
  </body>
</html>
